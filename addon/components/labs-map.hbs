{{#if this._loader.isLoaded}}
  <div class="labs-map-loaded"></div>

  {{!-- Highlighted Layer Handling --}}
  {{#maplibre-gl-source sourceId='hovered-feature' options=this.hoveredFeatureSource map=this._loader.map as |layer|}}
    {{log 'loading'}}
    {{maplibre-gl-layer
      map=this._loader.map
      layer=this.highlightedLineFeatureLayer
    }} 
    {{maplibre-gl-layer
      map=this._loader.map
      layer=this.highlightedCircleFeatureLayer
    }}
  {{/maplibre-gl-source}}

  {{yield (hash
    mapInstance=this._loader.map
    labs-layers=(component "labs-layers"
      map=this._loader.map
      layerGroups=this.layerGroups
      hoveredFeature=hoveredFeature)
    call=(component 'maplibre-gl-call' obj=this._loader.map)
    control=(component 'maplibre-gl-control' map=this._loader.map)
    image=(component 'maplibre-gl-image' map=this._loader.map)
    layer=(component 'maplibre-gl-layer' map=this._loader.map)
    marker=(component 'maplibre-gl-marker' map=this._loader.map MaplibreGl=this._loader.MaplibreGl)
    on=(component 'maplibre-gl-on' eventSource=this._loader.map)
    popup=(component 'maplibre-gl-popup' map=this._loader.map MaplibreGl=this._loader.MaplibreGl)
    source=(component 'maplibre-gl-source' map=this._loader.map)
    instance=this._loader.map
  )}}
{{else if this._loader.error}}
  {{#if (has-block 'inverse')}}
    {{yield this._loader.error to='inverse'}}
  {{else}}
    {{! template-lint-disable no-log }}
    {{log 'error rendering maplibre-gl' this._loader.error}}
  {{/if}}
{{/if}}